---
- name: exam_4
  hosts: vyos
  gather_facts: false

  tasks:
    - name: show interfaces before
      vyos_command:
        commands:
          - show interfaces
      register: result

    - name: debug result before
      debug:
        var: result.stdout_lines

    - name: set description
      vyos_config:
        lines:
          - set interfaces ethernet "{{ item.int }}" description "{{ item.desc }}"
        save: true 
      loop: 
        - { int: 'eth1', desc: 'loop_test1' }
        - { int: 'eth2', desc: 'loop_test2' }

    - name: show interfaces after
      vyos_command:
        commands:
          - show interfaces
      register: result

    - name: debug result after
      debug:
        var: result.stdout_lines